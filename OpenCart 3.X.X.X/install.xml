<?xml version="1.0" encoding="utf-8"?>
<modification>
    <name>Meest Express - All Modifications</name>
    <code>meest_express_all_modifications</code>
    <version>1.2.0</version>
    <author>Meest</author>
    <link>https://meest.com</link>






    <file path="admin/view/template/sale/order_list.twig">
        <operation>
            <search><![CDATA[<td class="text-right"><div style="min-width: 120px;">]]></search>
            <add position="replace">
                <![CDATA[
                <td class="text-right"><div style="min-width: 120px;">
                    {% if order.shipping_code == 'meest2.warehouse' or order.shipping_code == 'meest2.courier' or order.shipping_code == 'meest2.postomat' %}
                        <div class="btn-group">
                            <button type="button"
                                    class="btn btn-danger dropdown-toggle"
                                    data-toggle="dropdown"
                                    aria-haspopup="true"
                                    aria-expanded="false"
                                    style="
                                      background-color: #EBF1FB !important;
                                      border: none !important;
                                      border-radius: 5px !important;
                                      width: 60px;
                                      height: 37px;
                                      display: inline-flex;
                                      align-items: center;
                                      justify-content: space-between;
                                      color: #0061AF !important;
                                      padding: 0 8px;
                                      cursor: pointer;
                                    ">
                                <i class="fa fa-file-o"
                                   style="
                                       font-size: 16px;
                                       color: #0061AF !important;
                                       margin-left: 5px;
                                     ">
                                </i>
                                <span style="
                                  display: inline-block;
                                  width: 0;
                                  height: 0;
                                  border-left: 4px solid transparent;
                                  border-right: 4px solid transparent;
                                  border-top: 4px solid #0061AF;
                                "></span>
                            </button>
                            <ul class="dropdown-menu">
                                {% if order.meest2_cn_uuid != 'None' and order.meest2_cn_uuid is not empty %}
                                    <li><a href="index.php?route=extension/shipping/meest2/getParcelInfo&parcel_id={{ order.meest2_cn_uuid }}&user_token={{ user_token }}" class="dropdown-item">View Meest CN Info</a></li>
                                    <li><a href="index.php?route=extension/shipping/meest2/orderUpdateForm&parcel_id={{ order.meest2_cn_uuid }}&user_token={{ user_token }}" class="dropdown-item">Edit Meest CN</a></li>
                                {% else %}
                                    <li><a href="index.php?route=extension/shipping/meest2/orderForm&order_id={{ order.order_id }}&user_token={{ user_token }}" class="dropdown-item">Create Meest CN</a></li>
                                {% endif %}
                                <li><a href="#" style="display: none;">hide</a></li>
                            </ul>
                        </div>
                    {% endif %}
                ]]>
            </add>
        </operation>
    </file>





    <file path="admin/view/template/sale/order_list.twig">
        <operation>
            <search><![CDATA[<td class="text-center col-action"><div style="min-width: 120px;">]]></search>
            <add position="replace">
                <![CDATA[
               <td class="text-center col-action"><div style="min-width: 120px;">
                    {% if order.shipping_code == 'meest2.warehouse' or order.shipping_code == 'meest2.courier' or order.shipping_code == 'meest2.postomat' %}
                        <div class="btn-group">
                            <button type="button"
                                    class="btn btn-danger dropdown-toggle"
                                    data-toggle="dropdown"
                                    aria-haspopup="true"
                                    aria-expanded="false"
                                    style="
                                      background-color: #EBF1FB !important;
                                      border: none !important;
                                      border-radius: 5px !important;
                                      width: 60px;
                                      height: 37px;
                                      display: inline-flex;
                                      align-items: center;
                                      justify-content: space-between;
                                      color: #0061AF !important;
                                      padding: 0 8px;
                                      cursor: pointer;
                                    ">
                                <i class="fa fa-file-o"
                                   style="
                                       font-size: 16px;
                                       color: #0061AF !important;
                                       margin-left: 5px;
                                     ">
                                </i>
                                <span style="
                                  display: inline-block;
                                  width: 0;
                                  height: 0;
                                  border-left: 4px solid transparent;
                                  border-right: 4px solid transparent;
                                  border-top: 4px solid #0061AF;
                                "></span>
                            </button>
                            <ul class="dropdown-menu">
                                {% if order.meest2_cn_uuid != 'None' and order.meest2_cn_uuid is not empty %}
                                    <li><a href="index.php?route=extension/shipping/meest2/getParcelInfo&parcel_id={{ order.meest2_cn_uuid }}&user_token={{ user_token }}" class="dropdown-item">View Meest CN Info</a></li>
                                    <li><a href="index.php?route=extension/shipping/meest2/orderUpdateForm&parcel_id={{ order.meest2_cn_uuid }}&user_token={{ user_token }}" class="dropdown-item">Edit Meest CN</a></li>
                                {% else %}
                                    <li><a href="index.php?route=extension/shipping/meest2/orderForm&order_id={{ order.order_id }}&user_token={{ user_token }}" class="dropdown-item">Create Meest CN</a></li>
                                {% endif %}
                                <li><a href="#" style="display: none;">hide</a></li>
                            </ul>
                        </div>
                    {% endif %}
                ]]>
            </add>
        </operation>
    </file>





    <file path="admin/controller/sale/order.php">
        <operation>
            <search><![CDATA['edit'          => $this->url->link('sale/order/edit', 'user_token=' . $this->session->data['user_token'] . '&order_id=' . $result['order_id'] . $url, true)]]></search>
            <add position="before"><![CDATA[
                'meest2_cn_uuid'=> $result['meest2_cn_uuid'],
            ]]></add>
        </operation>
    </file>

    <file path="admin/controller/sale/order.php">
        <operation>
            <search><![CDATA['edit'          => $this->url->link('sale/orderpro/edit', 'user_token=' . $this->session->data['user_token'] . '&order_id=' . $result['order_id'] . $url, true)]]></search>
            <add position="before"><![CDATA[
                'meest2_cn_uuid'=> $result['meest2_cn_uuid'],
            ]]></add>
        </operation>
    </file>


    <file path="admin/model/sale/order.php">
        <operation>
            <search><![CDATA[SELECT o.order_id]]></search>
            <add position="replace"><![CDATA[SELECT o.order_id, IFNULL(o.meest2_cn_uuid, '') AS meest2_cn_uuid]]></add>
        </operation>
    </file>
    <file path="admin/view/template/sale/order_list.twig">
        <operation>
            <search><![CDATA[<button type="button" data-toggle="tooltip" title="{{ button_filter }}" onclick="$('#filter-order').toggleClass('hidden-sm hidden-xs');" class="btn btn-default hidden-md hidden-lg">]]></search>
            <add position="before">
                <![CDATA[
               		<div class="btn-group">
                        <button type="button"
                                class="btn btn-danger dropdown-toggle"
                                data-toggle="dropdown"
                                aria-haspopup="true"
                                aria-expanded="false"
                                style="
                                  background-color: #EBF1FB !important;
                                  border: none !important;
                                  border-radius: 5px !important;
                                  width: 60px;
                                  height: 37px;
                                  display: inline-flex;
                                  align-items: center;
                                  justify-content: space-between;
                                  color: #0061AF !important;
                                  padding: 0 8px;
                                  cursor: pointer;
                                ">
                            <i class="fa fa-file-o"
                               style="
                                   font-size: 16px;
                                   color: #0061AF !important;
                                   margin-left: 5px;
                                 ">
                            </i>
                            <span style="
                              display: inline-block;
                              width: 0;
                              height: 0;
                              border-left: 4px solid transparent;
                              border-right: 4px solid transparent;
                              border-top: 4px solid #0061AF;
                            "></span>
                        </button>
                        <ul class="dropdown-menu">
                            <li><a href="index.php?route=extension/shipping/meest2/parcelList&user_token={{ user_token }}">Meest Cn List</a></li>
                        </ul>
                    </div>
                ]]>
            </add>
        </operation>
    </file>
    
</modification>
